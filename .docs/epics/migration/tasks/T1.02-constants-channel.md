# T1.02: Channel Constants

## Metadata

| Field        | Value          |
| ------------ | -------------- |
| **ID**       | T1.02          |
| **Layer**    | L1 - Constants |
| **Status**   | done           |
| **Priority** | high           |
| **Estimate** | 0.5h           |
| **Parallel** | true           |
| **Assignee** | -              |
| **Created**  | 2026-01-04     |
| **Updated**  | 2026-01-07     |

## Dependencies

| Task ID | Name          |
| ------- | ------------- |
| T0.02   | Channel types |

## Blocks

| Task ID | Name                           |
| ------- | ------------------------------ |
| T7.04   | useChannelsStore               |
| T10a.\* | All channel-related components |

## Description

Migrate channel-related constants from Mattermost including channel types, notification levels, and sidebar grouping constants.

## Source Files

- `vendor/desktop/webapp/channels/src/utils/constants.tsx`
- `vendor/desktop/webapp/channels/src/packages/mattermost-redux/src/constants/channel_categories.ts`
- `vendor/desktop/webapp/channels/src/packages/mattermost-redux/src/constants/channels.ts`

## Target File

`apps/v2/src/constants/channel.ts`

## Implementation

```typescript
// apps/v2/src/constants/channel.ts

/**
 * Channel-related constants
 * Migrated from: vendor/desktop/webapp/channels/src/utils/constants.tsx
 */

//#region Channel Types

/**
 * Channel type identifiers used in the API and data models
 */
export const CHANNEL_TYPES = {
  /** Direct message channel (1:1) */
  DM: "D",
  /** Group message channel (2+ users) */
  GM: "G",
  /** Public channel - visible to all team members */
  OPEN: "O",
  /** Private channel - invite only */
  PRIVATE: "P",
  /** Archived channel marker */
  ARCHIVED: "archive",
} as const;

export type IChannelType = (typeof CHANNEL_TYPES)[keyof typeof CHANNEL_TYPES];

//#endregion

//#region Default Channels

/**
 * Default channel constants for new teams
 */
export const DEFAULT_CHANNELS = {
  /** Town Square - default channel for all teams */
  DEFAULT_CHANNEL: "town-square",
  DEFAULT_CHANNEL_UI_NAME: "Town Square",
  /** Off-Topic - secondary default channel */
  OFFTOPIC_CHANNEL: "off-topic",
  OFFTOPIC_CHANNEL_UI_NAME: "Off-Topic",
} as const;

//#endregion

//#region Notification Levels

/**
 * Channel notification levels for desktop/mobile/email
 */
export const NOTIFICATION_LEVELS = {
  /** Use global/account default setting */
  DEFAULT: "default",
  /** Notify for all messages */
  ALL: "all",
  /** Notify only for mentions */
  MENTION: "mention",
  /** Never notify */
  NONE: "none",
} as const;

export type INotificationLevel =
  (typeof NOTIFICATION_LEVELS)[keyof typeof NOTIFICATION_LEVELS];

/**
 * Desktop notification sound settings
 */
export const DESKTOP_SOUND = {
  /** Use default sound */
  DEFAULT: "default",
  /** Sound enabled */
  ON: "on",
  /** Sound disabled */
  OFF: "off",
} as const;

export type IDesktopSound = (typeof DESKTOP_SOUND)[keyof typeof DESKTOP_SOUND];

/**
 * Ignore channel mentions setting (@channel, @all, @here)
 */
export const IGNORE_CHANNEL_MENTIONS = {
  /** Ignore channel-wide mentions */
  ON: "on",
  /** Do not ignore channel-wide mentions */
  OFF: "off",
  /** Use default setting */
  DEFAULT: "default",
} as const;

export type IIgnoreChannelMentions =
  (typeof IGNORE_CHANNEL_MENTIONS)[keyof typeof IGNORE_CHANNEL_MENTIONS];

/**
 * Auto-follow threads in channel setting
 */
export const CHANNEL_AUTO_FOLLOW_THREADS = {
  /** Automatically follow threads */
  ON: "on",
  /** Do not automatically follow threads */
  OFF: "off",
} as const;

export type IChannelAutoFollowThreads =
  (typeof CHANNEL_AUTO_FOLLOW_THREADS)[keyof typeof CHANNEL_AUTO_FOLLOW_THREADS];

//#endregion

//#region Sidebar Grouping

/**
 * Unread channel grouping options
 */
export const GROUP_UNREAD_CHANNELS = {
  /** Disable unread grouping */
  DISABLED: "disabled",
  /** Group unreads by default (on) */
  DEFAULT_ON: "default_on",
  /** Group unreads disabled by default */
  DEFAULT_OFF: "default_off",
} as const;

export type IGroupUnreadChannels =
  (typeof GROUP_UNREAD_CHANNELS)[keyof typeof GROUP_UNREAD_CHANNELS];

/**
 * Special sidebar channel groups
 */
export const SIDEBAR_CHANNEL_GROUPS = {
  /** Unread channels group */
  UNREADS: "unreads",
  /** Favorite channels group */
  FAVORITE: "favorite",
} as const;

export type ISidebarChannelGroup =
  (typeof SIDEBAR_CHANNEL_GROUPS)[keyof typeof SIDEBAR_CHANNEL_GROUPS];

//#endregion

//#region Channel Limits

/**
 * Channel-related limits and constraints
 */
export const CHANNEL_LIMITS = {
  /** Minimum channel name length */
  MIN_CHANNELNAME_LENGTH: 1,
  /** Maximum channel name length */
  MAX_CHANNELNAME_LENGTH: 64,
  /** Default shortened URL length for display */
  DEFAULT_CHANNELURL_SHORTEN_LENGTH: 52,
  /** Maximum channel purpose/description length */
  MAX_CHANNELPURPOSE_LENGTH: 250,
  /** Maximum channels per team */
  DEFAULT_MAX_CHANNELS_PER_TEAM: 2000,
  /** Maximum notifications per channel */
  DEFAULT_MAX_NOTIFICATIONS_PER_CHANNEL: 1000,
  /** Channel ID string length */
  CHANNEL_ID_LENGTH: 26,
  /** Maximum users in group message */
  MAX_USERS_IN_GM: 8,
  /** Minimum users in group message */
  MIN_USERS_IN_GM: 3,
  /** Maximum DMs to show in sidebar */
  MAX_DMS: 20,
  /** Maximum channels to show in popover */
  MAX_CHANNEL_POPOVER_COUNT: 100,
  /** Available DM/GM show counts for settings */
  DM_AND_GM_SHOW_COUNTS: [10, 15, 20, 40] as const,
  /** Highest DM show count option */
  HIGHEST_DM_SHOW_COUNT: 10000,
} as const;

//#endregion

//#region Category Types

/**
 * Channel category types for sidebar organization
 * Migrated from: vendor/.../constants/channel_categories.ts
 */
export const CATEGORY_TYPES = {
  /** Favorite channels category */
  FAVORITES: "favorites",
  /** Regular channels category */
  CHANNELS: "channels",
  /** Direct messages category */
  DIRECT_MESSAGES: "direct_messages",
  /** User-created custom category */
  CUSTOM: "custom",
} as const;

export type ICategoryType =
  (typeof CATEGORY_TYPES)[keyof typeof CATEGORY_TYPES];

//#endregion

//#region Mark Unread

/**
 * Channel mark as unread behavior options
 * Migrated from: vendor/.../constants/channels.ts
 */
export const MARK_UNREAD = {
  /** Mark as unread for all messages */
  ALL: "all",
  /** Mark as unread only for mentions */
  MENTION: "mention",
} as const;

export type IMarkUnread = (typeof MARK_UNREAD)[keyof typeof MARK_UNREAD];

//#endregion

//#region Special Mentions

/**
 * Special channel-wide mention keywords
 */
export const SPECIAL_MENTIONS = ["all", "channel", "here"] as const;

export type ISpecialMention = (typeof SPECIAL_MENTIONS)[number];

/**
 * Regex patterns for mention detection
 */
export const MENTION_PATTERNS = {
  /** Matches @all, @channel, @here */
  SPECIAL_MENTIONS: /(?:\B|\b_+)@(channel|all|here)(?!(\.|-|_)*[^\W_])/gi,
  /** Matches @all only */
  ALL_MENTION: /(?:\B|\b_+)@(all)(?!(\.|-|_)*[^\W_])/gi,
  /** Matches @channel only */
  CHANNEL_MENTION: /(?:\B|\b_+)@(channel)(?!(\.|-|_)*[^\W_])/gi,
  /** Matches @here only */
  HERE_MENTION: /(?:\B|\b_+)@(here)(?!(\.|-|_)*[^\W_])/gi,
  /** Matches @all or @channel */
  ALL_MEMBERS_MENTIONS: /(?:\B|\b_+)@(channel|all)(?!(\.|-|_)*[^\W_])/gi,
} as const;

/**
 * Threshold for warning before notifying all members
 */
export const NOTIFY_ALL_MEMBERS_THRESHOLD = 5;

//#endregion
```

## Index Export

```typescript
// apps/v2/src/constants/index.ts

export {
  CHANNEL_TYPES,
  DEFAULT_CHANNELS,
  NOTIFICATION_LEVELS,
  DESKTOP_SOUND,
  IGNORE_CHANNEL_MENTIONS,
  CHANNEL_AUTO_FOLLOW_THREADS,
  GROUP_UNREAD_CHANNELS,
  SIDEBAR_CHANNEL_GROUPS,
  CHANNEL_LIMITS,
  CATEGORY_TYPES,
  MARK_UNREAD,
  SPECIAL_MENTIONS,
  MENTION_PATTERNS,
  NOTIFY_ALL_MEMBERS_THRESHOLD,
} from "./channel";

export type {
  IChannelType,
  INotificationLevel,
  IDesktopSound,
  IIgnoreChannelMentions,
  IChannelAutoFollowThreads,
  IGroupUnreadChannels,
  ISidebarChannelGroup,
  ICategoryType,
  IMarkUnread,
  ISpecialMention,
} from "./channel";
```

## Acceptance Criteria

- [ ] All constants defined with `as const` assertion
- [ ] All type aliases prefixed with `I`
- [ ] Uses `#region` comments for organization
- [ ] Exported from `constants/index.ts`
- [ ] JSDoc comments for all exported constants
- [ ] TypeScript strict mode passes
- [ ] No magic strings - values derived from const objects

## Testing

```bash
# Type check
pnpm --filter @retrievly/app tsc --noEmit

# Verify exports
pnpm --filter @retrievly/app node -e "console.log(require('./src/constants/channel'))"
```

## Notes

- `CHANNEL_TYPES` maps to API channel type field values
- `NOTIFICATION_LEVELS` used by channel member notification preferences
- `CHANNEL_LIMITS` contains validation constraints matching server-side limits
- Mention regex patterns used for @mention highlighting and notification logic
