# T6.14: Separator Component

## Metadata

| Field        | Value              |
| ------------ | ------------------ |
| **ID**       | T6.14              |
| **Layer**    | L6 - UI Components |
| **Status**   | pending            |
| **Priority** | medium             |
| **Estimate** | 2h                 |
| **Parallel** | true               |
| **Assignee** | -                  |
| **Created**  | 2026-01-04         |
| **Updated**  | 2026-01-04         |

## Dependencies

| Task ID | Name         |
| ------- | ------------ |
| T0.01   | types-common |

## Blocks

| Task ID | Name                          |
| ------- | ----------------------------- |
| T10b.\* | Layout composition components |

## Description

Migrate the Separator/Divider component from Mattermost. The original implementation includes `BasicSeparator` and `NotificationSeparator` with SCSS styling. This migration creates a unified, typed React Native separator with Unistyles variants for orientation, thickness, and optional centered label text.

## Source Files

- `vendor/desktop/webapp/channels/src/components/widgets/separator/basic-separator.tsx`
- `vendor/desktop/webapp/channels/src/components/widgets/separator/notification-separator.tsx`
- `vendor/desktop/webapp/channels/src/components/widgets/separator/separator.scss`
- `vendor/desktop/webapp/channels/src/components/widgets/separator/notification-separator.scss`
- `vendor/desktop/webapp/channels/src/components/menu/menu_item_separator.tsx`

### Source Analysis

The original implementation uses:

- **Base structure**: `<hr>` element with optional text overlay
- **CSS classes**: `.Separator`, `.BasicSeparator`, `.NotificationSeparator`
- **Text handling**: Centered label with background pill (`border-radius: 50px`)
- **Color themes**: Default uses border color, notification uses orange (`#ffaf53`)
- **Typography**: 13px font size, 700 weight for labels

Key patterns migrated:
| Original Class | Purpose |
|----------------|---------|
| `.Separator` | Base horizontal line with optional label |
| `.BasicSeparator` | Standard separator using theme border color |
| `.NotificationSeparator` | Orange notification separator |
| `.separator__hr` | The actual line element |
| `.separator__text` | Centered label with background |

## Migration Target

- **Target File**: `apps/v2/src/components/Separator/Separator.tsx`
- **Index Export**: `apps/v2/src/components/Separator/index.ts`

## Implementation

```typescript
// apps/v2/src/components/Separator/Separator.tsx

import { Text, View } from "react-native";
import { StyleSheet, UnistylesVariants } from "react-native-unistyles";
import { useTranslation } from "react-i18next";

//#region Types

type IOrientation = "horizontal" | "vertical";

type IThickness = "thin" | "medium" | "thick";

type IColorVariant = "default" | "light" | "dark" | "notification";

type IProps = {
  /**
   * i18n translation key for label text
   */
  labelKey?: string;
  /**
   * Direct label text (use labelKey for i18n)
   */
  label?: string;
  /**
   * Separator orientation
   * @default "horizontal"
   */
  orientation?: IOrientation;
  /**
   * Line thickness
   * @default "thin"
   */
  thickness?: IThickness;
  /**
   * Color variant
   * @default "default"
   */
  colorVariant?: IColorVariant;
  /**
   * Custom spacing around separator (vertical margin for horizontal, horizontal margin for vertical)
   * Uses theme.gap multiplier
   * @default 2
   */
  spacing?: number;
  /**
   * Ref to the container View
   */
  ref?: React.Ref<React.ComponentRef<typeof View>>;
  /**
   * Test ID for testing
   */
  testID?: string;
} & UnistylesVariants<typeof styles>;

//#endregion Types

//#region Component

export function Separator({
  labelKey,
  label,
  orientation = "horizontal",
  thickness = "thin",
  colorVariant = "default",
  spacing = 2,
  ref,
  testID,
}: IProps) {
  const { t } = useTranslation();

  const displayLabel = labelKey ? t(labelKey) : label;
  const hasLabel = Boolean(displayLabel) && orientation === "horizontal";

  styles.useVariants({
    orientation,
    thickness,
    colorVariant,
    hasLabel,
  });

  const spacingStyle =
    orientation === "horizontal"
      ? { marginVertical: spacing * 8 }
      : { marginHorizontal: spacing * 8 };

  return (
    <View
      ref={ref}
      style={[styles.container, spacingStyle]}
      accessibilityRole="separator"
      testID={testID}
    >
      {hasLabel ? (
        <>
          <View style={styles.line} />
          <View style={styles.labelContainer}>
            <Text style={styles.labelText}>{displayLabel}</Text>
          </View>
          <View style={styles.line} />
        </>
      ) : (
        <View style={styles.line} />
      )}
    </View>
  );
}

//#endregion Component

//#region Styles

const styles = StyleSheet.create((theme) => ({
  container: {
    alignItems: "center",
    justifyContent: "center",
    variants: {
      //#region Orientation Styles
      orientation: {
        horizontal: {
          flexDirection: "row",
          width: "100%",
        },
        vertical: {
          flexDirection: "column",
          height: "100%",
        },
      },
      //#endregion Orientation Styles

      //#region Has Label (for accessibility)
      hasLabel: {
        true: {},
        false: {},
      },
      //#endregion Has Label

      //#region Thickness (container doesn't need thickness)
      thickness: {
        thin: {},
        medium: {},
        thick: {},
      },
      //#endregion Thickness

      //#region Color Variant (container doesn't need color)
      colorVariant: {
        default: {},
        light: {},
        dark: {},
        notification: {},
      },
      //#endregion Color Variant
    },
  },

  line: {
    variants: {
      //#region Line Orientation Styles
      orientation: {
        horizontal: {
          flex: 1,
          height: 1,
        },
        vertical: {
          flex: 1,
          width: 1,
        },
      },
      //#endregion Line Orientation Styles

      //#region Line Thickness Styles
      thickness: {
        thin: {},
        medium: {},
        thick: {},
      },
      //#endregion Line Thickness Styles

      //#region Line Color Variant Styles
      colorVariant: {
        default: {
          backgroundColor: theme.colors.borderDefault,
        },
        light: {
          backgroundColor: theme.colors.borderLight,
        },
        dark: {
          backgroundColor: theme.colors.borderDark,
        },
        notification: {
          backgroundColor: theme.colors.newMessageSeparator,
        },
      },
      //#endregion Line Color Variant Styles

      //#region Has Label (line doesn't change)
      hasLabel: {
        true: {},
        false: {},
      },
      //#endregion Has Label
    },
    compoundVariants: [
      // Horizontal thickness overrides
      {
        orientation: "horizontal",
        thickness: "medium",
        styles: {
          height: 2,
        },
      },
      {
        orientation: "horizontal",
        thickness: "thick",
        styles: {
          height: 4,
        },
      },
      // Vertical thickness overrides
      {
        orientation: "vertical",
        thickness: "medium",
        styles: {
          width: 2,
        },
      },
      {
        orientation: "vertical",
        thickness: "thick",
        styles: {
          width: 4,
        },
      },
    ],
  },

  labelContainer: {
    paddingHorizontal: theme.gap(1.5), // 12px
    backgroundColor: theme.colors.centerChannelBg,
    borderRadius: 50, // pill shape
    variants: {
      //#region Label Container Orientation
      orientation: {
        horizontal: {},
        vertical: {
          display: "none",
        },
      },
      //#endregion Label Container Orientation

      //#region Label Container Thickness (unused)
      thickness: {
        thin: {},
        medium: {},
        thick: {},
      },
      //#endregion Label Container Thickness

      //#region Label Container Color Variant (unused)
      colorVariant: {
        default: {},
        light: {},
        dark: {},
        notification: {},
      },
      //#endregion Label Container Color Variant

      //#region Has Label
      hasLabel: {
        true: {},
        false: {
          display: "none",
        },
      },
      //#endregion Has Label
    },
  },

  labelText: {
    fontFamily: theme.fonts.primary,
    fontSize: 13,
    fontWeight: theme.fontWeights.semiBold,
    lineHeight: 26, // 2em equivalent
    textAlign: "center",
    variants: {
      //#region Label Text Orientation (unused)
      orientation: {
        horizontal: {},
        vertical: {},
      },
      //#endregion Label Text Orientation

      //#region Label Text Thickness (unused)
      thickness: {
        thin: {},
        medium: {},
        thick: {},
      },
      //#endregion Label Text Thickness

      //#region Label Text Color Variant Styles
      colorVariant: {
        default: {
          color: theme.colors.centerChannelColor,
        },
        light: {
          color: theme.colors.centerChannelColor,
        },
        dark: {
          color: theme.colors.centerChannelColor,
        },
        notification: {
          color: theme.colors.newMessageSeparator,
        },
      },
      //#endregion Label Text Color Variant Styles

      //#region Has Label (unused)
      hasLabel: {
        true: {},
        false: {},
      },
      //#endregion Has Label
    },
  },
}));

//#endregion Styles
```

## Index Export

```typescript
// apps/v2/src/components/Separator/index.ts

export { Separator } from "./Separator";
```

## Acceptance Criteria

- [ ] Supports 2 orientations: horizontal, vertical
- [ ] Supports 3 thickness variants: thin (1px), medium (2px), thick (4px)
- [ ] Supports 4 color variants: default, light, dark, notification
- [ ] Optional centered label text (horizontal only)
- [ ] Uses i18n translation keys for label text
- [ ] Configurable spacing around separator
- [ ] All types use `I` prefix naming convention
- [ ] No `forwardRef` (React 19 ref prop)
- [ ] No `useCallback`/`useMemo` (React Compiler)
- [ ] Uses Unistyles variants (not conditional styles)
- [ ] TypeScript strict mode passes
- [ ] No `any` types

## Testing

```typescript
// apps/v2/src/components/Separator/Separator.spec.tsx

import { render } from "@testing-library/react-native";
import { Separator } from "./Separator";

//#region Rendering Tests

describe("<Separator />", () => {
  describe("rendering", () => {
    it("renders horizontal separator by default", () => {
      const { getByRole } = render(<Separator />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders with testID", () => {
      const { getByTestId } = render(<Separator testID="test-separator" />);
      expect(getByTestId("test-separator")).toBeTruthy();
    });

    it("renders with label text", () => {
      const { getByText } = render(<Separator label="New Messages" />);
      expect(getByText("New Messages")).toBeTruthy();
    });

    it("renders with labelKey (i18n)", () => {
      const { getByText } = render(
        <Separator labelKey="label.newMessages" />
      );
      expect(getByText("New Messages")).toBeTruthy();
    });
  });

  //#endregion Rendering Tests

  //#region Orientation Tests

  describe("orientation", () => {
    it("renders horizontal orientation", () => {
      const { getByRole } = render(<Separator orientation="horizontal" />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders vertical orientation", () => {
      const { getByRole } = render(<Separator orientation="vertical" />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("does not show label in vertical orientation", () => {
      const { queryByText } = render(
        <Separator orientation="vertical" label="Hidden" />
      );
      // Label should not be visible in vertical mode
      expect(queryByText("Hidden")).toBeNull();
    });
  });

  //#endregion Orientation Tests

  //#region Thickness Tests

  describe("thickness", () => {
    it("renders thin thickness (default)", () => {
      const { getByRole } = render(<Separator />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders medium thickness", () => {
      const { getByRole } = render(<Separator thickness="medium" />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders thick thickness", () => {
      const { getByRole } = render(<Separator thickness="thick" />);
      expect(getByRole("separator")).toBeTruthy();
    });
  });

  //#endregion Thickness Tests

  //#region Color Variant Tests

  describe("color variants", () => {
    it("renders default color variant", () => {
      const { getByRole } = render(<Separator colorVariant="default" />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders light color variant", () => {
      const { getByRole } = render(<Separator colorVariant="light" />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders dark color variant", () => {
      const { getByRole } = render(<Separator colorVariant="dark" />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders notification color variant", () => {
      const { getByRole } = render(<Separator colorVariant="notification" />);
      expect(getByRole("separator")).toBeTruthy();
    });
  });

  //#endregion Color Variant Tests

  //#region Spacing Tests

  describe("spacing", () => {
    it("renders with default spacing", () => {
      const { getByRole } = render(<Separator />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders with custom spacing", () => {
      const { getByRole } = render(<Separator spacing={4} />);
      expect(getByRole("separator")).toBeTruthy();
    });

    it("renders with zero spacing", () => {
      const { getByRole } = render(<Separator spacing={0} />);
      expect(getByRole("separator")).toBeTruthy();
    });
  });

  //#endregion Spacing Tests

  //#region Accessibility Tests

  describe("accessibility", () => {
    it("has separator role", () => {
      const { getByRole } = render(<Separator />);
      expect(getByRole("separator")).toBeTruthy();
    });
  });

  //#endregion Accessibility Tests

  //#region Combined Props Tests

  describe("combined props", () => {
    it("renders notification separator with label", () => {
      const { getByText, getByRole } = render(
        <Separator
          colorVariant="notification"
          label="New Messages"
          thickness="medium"
        />
      );
      expect(getByRole("separator")).toBeTruthy();
      expect(getByText("New Messages")).toBeTruthy();
    });

    it("renders vertical thick dark separator", () => {
      const { getByRole } = render(
        <Separator
          orientation="vertical"
          thickness="thick"
          colorVariant="dark"
        />
      );
      expect(getByRole("separator")).toBeTruthy();
    });
  });

  //#endregion Combined Props Tests
});
```

### Run Tests

```bash
pnpm --filter @retrievly/app test:unit -- Separator
```

## Storybook

```typescript
// apps/v2/src/components/Separator/Separator.stories.tsx

import type { Meta, StoryObj } from "@storybook/react";
import { View, Text } from "react-native";
import { Separator } from "./Separator";

const meta: Meta<typeof Separator> = {
  title: "Components/Separator",
  component: Separator,
  argTypes: {
    orientation: {
      control: "select",
      options: ["horizontal", "vertical"],
    },
    thickness: {
      control: "select",
      options: ["thin", "medium", "thick"],
    },
    colorVariant: {
      control: "select",
      options: ["default", "light", "dark", "notification"],
    },
    spacing: {
      control: { type: "number", min: 0, max: 8 },
    },
  },
  decorators: [
    (Story) => (
      <View style={{ padding: 16, minHeight: 200 }}>
        <Story />
      </View>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof Separator>;

//#region Basic Stories

export const Default: Story = {
  args: {},
};

export const WithLabel: Story = {
  args: {
    label: "New Messages",
  },
};

export const WithLabelKey: Story = {
  args: {
    labelKey: "label.newMessages",
  },
};

//#endregion Basic Stories

//#region Orientation Stories

export const Horizontal: Story = {
  args: {
    orientation: "horizontal",
  },
};

export const Vertical: Story = {
  args: {
    orientation: "vertical",
  },
  decorators: [
    (Story) => (
      <View style={{ flexDirection: "row", height: 100, padding: 16 }}>
        <Text>Left</Text>
        <Story />
        <Text>Right</Text>
      </View>
    ),
  ],
};

//#endregion Orientation Stories

//#region Thickness Stories

export const Thin: Story = {
  args: {
    thickness: "thin",
  },
};

export const Medium: Story = {
  args: {
    thickness: "medium",
  },
};

export const Thick: Story = {
  args: {
    thickness: "thick",
  },
};

//#endregion Thickness Stories

//#region Color Variant Stories

export const DefaultColor: Story = {
  args: {
    colorVariant: "default",
  },
};

export const LightColor: Story = {
  args: {
    colorVariant: "light",
  },
};

export const DarkColor: Story = {
  args: {
    colorVariant: "dark",
  },
};

export const NotificationColor: Story = {
  args: {
    colorVariant: "notification",
    label: "New Messages",
  },
};

//#endregion Color Variant Stories

//#region All Variants Stories

export const AllThicknesses: Story = {
  render: () => (
    <View style={{ gap: 16 }}>
      <View>
        <Text style={{ marginBottom: 8 }}>Thin (1px)</Text>
        <Separator thickness="thin" />
      </View>
      <View>
        <Text style={{ marginBottom: 8 }}>Medium (2px)</Text>
        <Separator thickness="medium" />
      </View>
      <View>
        <Text style={{ marginBottom: 8 }}>Thick (4px)</Text>
        <Separator thickness="thick" />
      </View>
    </View>
  ),
};

export const AllColorVariants: Story = {
  render: () => (
    <View style={{ gap: 16 }}>
      <View>
        <Text style={{ marginBottom: 8 }}>Default</Text>
        <Separator colorVariant="default" />
      </View>
      <View>
        <Text style={{ marginBottom: 8 }}>Light</Text>
        <Separator colorVariant="light" />
      </View>
      <View>
        <Text style={{ marginBottom: 8 }}>Dark</Text>
        <Separator colorVariant="dark" />
      </View>
      <View>
        <Text style={{ marginBottom: 8 }}>Notification</Text>
        <Separator colorVariant="notification" />
      </View>
    </View>
  ),
};

export const WithLabels: Story = {
  render: () => (
    <View style={{ gap: 24 }}>
      <Separator label="Section Break" />
      <Separator label="New Messages" colorVariant="notification" />
      <Separator label="Today" thickness="medium" />
    </View>
  ),
};

export const VerticalVariants: Story = {
  render: () => (
    <View style={{ flexDirection: "row", height: 100, alignItems: "center", gap: 16 }}>
      <Text>A</Text>
      <Separator orientation="vertical" thickness="thin" />
      <Text>B</Text>
      <Separator orientation="vertical" thickness="medium" />
      <Text>C</Text>
      <Separator orientation="vertical" thickness="thick" />
      <Text>D</Text>
    </View>
  ),
};

//#endregion All Variants Stories

//#region Spacing Stories

export const CustomSpacing: Story = {
  render: () => (
    <View>
      <Text>No spacing (0)</Text>
      <Separator spacing={0} />
      <Text>Default spacing (2)</Text>
      <Separator spacing={2} />
      <Text>Large spacing (4)</Text>
      <Separator spacing={4} />
      <Text>Extra large spacing (6)</Text>
      <Separator spacing={6} />
      <Text>End</Text>
    </View>
  ),
};

//#endregion Spacing Stories
```
