# T1.04: File Constants

## Metadata

| Field        | Value          |
| ------------ | -------------- |
| **ID**       | T1.04          |
| **Layer**    | L1 - Constants |
| **Status**   | done           |
| **Priority** | high           |
| **Estimate** | 0.5h           |
| **Parallel** | true           |
| **Assignee** | -              |
| **Created**  | 2026-01-04     |
| **Updated**  | 2026-01-04     |

## Dependencies

| Task ID | Name       |
| ------- | ---------- |
| T0.05   | File Types |

## Blocks

| Task ID | Name                  |
| ------- | --------------------- |
| T4.08   | File Upload Component |
| T10b.10 | File Preview          |

## Description

Migrate file-related constants from Mattermost: file types, file extensions by category, file size units, and file dimension limits.

## Source Files

- `vendor/desktop/webapp/channels/src/utils/constants.tsx` (FileTypes, extension arrays, dimension constants)
- `vendor/desktop/webapp/channels/src/utils/file_utils.tsx` (FileSizes)

## Target File

`apps/v2/src/constants/file.ts`

## Implementation

```typescript
// apps/v2/src/constants/file.ts

/**
 * File-related constants
 * Migrated from:
 * - vendor/desktop/webapp/channels/src/utils/constants.tsx
 * - vendor/desktop/webapp/channels/src/utils/file_utils.tsx
 */

//#region File Types

export const FILE_TYPES = {
  TEXT: "text",
  IMAGE: "image",
  AUDIO: "audio",
  VIDEO: "video",
  SPREADSHEET: "spreadsheet",
  CODE: "code",
  WORD: "word",
  PRESENTATION: "presentation",
  PDF: "pdf",
  PATCH: "patch",
  SVG: "svg",
  OTHER: "other",
} as const;

export type IFileType = (typeof FILE_TYPES)[keyof typeof FILE_TYPES];

//#endregion

//#region File Size Units

export const FILE_SIZES = {
  BIT: 1,
  BYTE: 8,
  KILOBYTE: 8 * 1024,
  MEGABYTE: 8 * 1024 * 1024,
  GIGABYTE: 8 * 1024 * 1024 * 1024,
} as const;

export type IFileSizeUnit = (typeof FILE_SIZES)[keyof typeof FILE_SIZES];

//#endregion

//#region File Extensions by Category

export const TEXT_EXTENSIONS = ["txt", "rtf", "vtt"] as const;

export const IMAGE_EXTENSIONS = [
  "jpg",
  "gif",
  "bmp",
  "png",
  "jpeg",
  "tiff",
  "tif",
  "psd",
  "webp",
] as const;

export const AUDIO_EXTENSIONS = [
  "mp3",
  "wav",
  "wma",
  "m4a",
  "flac",
  "aac",
  "ogg",
  "m4r",
] as const;

export const VIDEO_EXTENSIONS = [
  "mp4",
  "avi",
  "webm",
  "mkv",
  "wmv",
  "mpg",
  "mov",
  "flv",
] as const;

export const PRESENTATION_EXTENSIONS = ["ppt", "pptx"] as const;

export const SPREADSHEET_EXTENSIONS = ["xlsx", "csv"] as const;

export const WORD_EXTENSIONS = ["doc", "docx"] as const;

export const PDF_EXTENSIONS = ["pdf"] as const;

export const PATCH_EXTENSIONS = ["patch"] as const;

export const SVG_EXTENSIONS = ["svg"] as const;

export const CODE_EXTENSIONS = [
  "applescript",
  "as",
  "atom",
  "bas",
  "bash",
  "boot",
  "c",
  "c++",
  "cake",
  "cc",
  "cjsx",
  "cl2",
  "clj",
  "cljc",
  "cljs",
  "cljs.hl",
  "cljscm",
  "cljx",
  "_coffee",
  "coffee",
  "cpp",
  "cs",
  "csharp",
  "cson",
  "css",
  "d",
  "dart",
  "delphi",
  "dfm",
  "di",
  "diff",
  "django",
  "docker",
  "dockerfile",
  "dpr",
  "erl",
  "ex",
  "exs",
  "f90",
  "f95",
  "freepascal",
  "fs",
  "fsharp",
  "gcode",
  "gemspec",
  "go",
  "groovy",
  "gyp",
  "h",
  "h++",
  "handlebars",
  "hbs",
  "hic",
  "hpp",
  "hs",
  "html",
  "html.handlebars",
  "html.hbs",
  "hx",
  "iced",
  "irb",
  "java",
  "jinja",
  "jl",
  "js",
  "json",
  "jsp",
  "jsx",
  "kt",
  "ktm",
  "kts",
  "lazarus",
  "less",
  "lfm",
  "lisp",
  "log",
  "lpr",
  "lua",
  "m",
  "mak",
  "matlab",
  "md",
  "mk",
  "mkd",
  "mkdown",
  "ml",
  "mm",
  "nc",
  "obj-c",
  "objc",
  "osascript",
  "pas",
  "pascal",
  "perl",
  "php",
  "php3",
  "php4",
  "php5",
  "php6",
  "pl",
  "plist",
  "podspec",
  "pp",
  "ps",
  "ps1",
  "py",
  "r",
  "rb",
  "rs",
  "rss",
  "ruby",
  "scala",
  "scm",
  "scpt",
  "scss",
  "sh",
  "sld",
  "sql",
  "st",
  "styl",
  "swift",
  "tex",
  "thor",
  "v",
  "vb",
  "vbnet",
  "vbs",
  "veo",
  "xhtml",
  "xml",
  "xsl",
  "yaml",
  "zsh",
] as const;

//#endregion

//#region MIME Type Patterns

export const MIME_TYPE_PATTERNS = {
  SPREADSHEET: [
    "vnd.ms-excel",
    "spreadsheetml",
    "vnd.sun.xml.calc",
    "opendocument.spreadsheet",
  ],
  PRESENTATION: [
    "vnd.ms-powerpoint",
    "presentationml",
    "vnd.sun.xml.impress",
    "opendocument.presentation",
  ],
  WORD: [
    "msword",
    "vnd.ms-word",
    "officedocument.wordprocessingml",
    "application/x-mswrite",
  ],
} as const;

//#endregion

//#region File Upload Limits

export const FILE_UPLOAD_LIMITS = {
  MAX_FILES: 10,
  MAX_FILENAME_LENGTH: 35,
  CODE_PREVIEW_MAX_SIZE: 500000, // 500 KB
} as const;

//#endregion

//#region File Dimensions

export const FILE_DIMENSIONS = {
  THUMBNAIL_WIDTH: 128,
  THUMBNAIL_HEIGHT: 100,
  PREVIEWER_HEIGHT: 170,
  EXPANDABLE_INLINE_IMAGE_MIN_HEIGHT: 100,
  WEB_VIDEO_WIDTH: 640,
  WEB_VIDEO_HEIGHT: 480,
  MOBILE_VIDEO_WIDTH: 480,
  MOBILE_VIDEO_HEIGHT: 360,
} as const;

//#endregion

//#region License Extension

export const LICENSE_EXTENSION = ".mattermost-license" as const;

//#endregion
```

## Index Export

```typescript
// apps/v2/src/constants/index.ts

export {
  FILE_TYPES,
  FILE_SIZES,
  TEXT_EXTENSIONS,
  IMAGE_EXTENSIONS,
  AUDIO_EXTENSIONS,
  VIDEO_EXTENSIONS,
  PRESENTATION_EXTENSIONS,
  SPREADSHEET_EXTENSIONS,
  WORD_EXTENSIONS,
  PDF_EXTENSIONS,
  PATCH_EXTENSIONS,
  SVG_EXTENSIONS,
  CODE_EXTENSIONS,
  MIME_TYPE_PATTERNS,
  FILE_UPLOAD_LIMITS,
  FILE_DIMENSIONS,
  LICENSE_EXTENSION,
} from "./file";
export type { IFileType, IFileSizeUnit } from "./file";
```

## Acceptance Criteria

- [ ] All constants use `as const` assertion
- [ ] Derived types use `typeof` pattern
- [ ] Types prefixed with `I`
- [ ] Uses `#region` comments for organization
- [ ] Exported from `constants/index.ts`
- [ ] SCREAMING_SNAKE_CASE for constant names
- [ ] TypeScript strict mode passes

## Testing

```bash
pnpm --filter @retrievly/app tsc --noEmit
```
