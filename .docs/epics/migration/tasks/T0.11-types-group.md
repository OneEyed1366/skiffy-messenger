# T0.11: Group Types

## Metadata

| Field        | Value      |
| ------------ | ---------- |
| **ID**       | T0.11      |
| **Layer**    | L0 - Types |
| **Status**   | pending    |
| **Priority** | high       |
| **Estimate** | 1h         |
| **Parallel** | true       |
| **Assignee** | -          |
| **Created**  | 2026-01-04 |
| **Updated**  | 2026-01-04 |

## Dependencies

| Task ID | Name       |
| ------- | ---------- |
| T0.01   | User Types |

## Blocks

| Task ID | Name           |
| ------- | -------------- |
| T10c.01 | ProfilePopover |

## Description

Migrate group-related TypeScript types from Mattermost. Includes group entities, syncables, membership, and search parameters.

## Source Files

- `vendor/desktop/webapp/platform/types/src/groups.ts`

## Target File

`apps/v2/src/types/group.ts`

## Implementation

```typescript
// apps/v2/src/types/group.ts

/**
 * Group-related type definitions
 * Migrated from: vendor/desktop/webapp/platform/types/src/groups.ts
 */

import type { IUserProfile } from "./user";
import type { IRelationOneToOne } from "./utilities";

//#region Enums

export enum ESyncableType {
  Team = "team",
  Channel = "channel",
}

export enum EGroupSource {
  Ldap = "ldap",
  Custom = "custom",
}

export enum EPluginGroupSourcePrefix {
  Plugin = "plugin_",
}

//#endregion

//#region Core Group Types

export type IGroup = {
  id: string;
  name: string;
  display_name: string;
  description: string;
  source: string;
  remote_id: string | null;
  create_at: number;
  update_at: number;
  delete_at: number;
  has_syncables: boolean;
  member_count: number;
  scheme_admin: boolean;
  allow_reference: boolean;
  channel_member_count?: number;
  channel_member_timezones_count?: number;
  member_ids?: string[];
};

export type IGroupPatch = {
  allow_reference: boolean;
  name?: string;
};

export type ICustomGroupPatch = {
  name: string;
  display_name: string;
};

export type IGroupCreateWithUserIds = {
  name: string;
  allow_reference: boolean;
  display_name: string;
  source: string;
  user_ids: string[];
  description?: string;
};

//#endregion

//#region Syncables

export type ISyncablePatch = {
  scheme_admin: boolean;
  auto_add: boolean;
};

export type IGroupTeam = {
  team_id: string;
  team_display_name: string;
  team_type?: string;
  group_id?: string;
  auto_add?: boolean;
  scheme_admin?: boolean;
  create_at?: number;
  delete_at?: number;
  update_at?: number;
};

export type IGroupChannel = {
  channel_id: string;
  channel_display_name: string;
  channel_type?: string;
  team_id: string;
  team_display_name: string;
  team_type?: string;
  group_id?: string;
  auto_add?: boolean;
  scheme_admin?: boolean;
  create_at?: number;
  delete_at?: number;
  update_at?: number;
};

export type IGroupSyncable = {
  group_id: string;
  auto_add: boolean;
  scheme_admin: boolean;
  create_at: number;
  delete_at: number;
  update_at: number;
  type: "Team" | "Channel";
};

export type IGroupSyncablesState = {
  teams: IGroupTeam[];
  channels: IGroupChannel[];
};

//#endregion

//#region State & Stats

export type IGroupsState = {
  syncables: Record<string, IGroupSyncablesState>;
  stats: IRelationOneToOne<IGroup, IGroupStats>;
  groups: Record<string, IGroup>;
  myGroups: string[];
};

export type IGroupStats = {
  group_id: string;
  total_member_count: number;
};

//#endregion

//#region Search & Params

export type IGroupSearchOpts = {
  q: string;
  is_linked?: boolean;
  is_configured?: boolean;
};

export type IGetGroupsParams = {
  filter_allow_reference?: boolean;
  page?: number;
  per_page?: number;
  include_member_count?: boolean;
  include_archived?: boolean;
  filter_archived?: boolean;
  include_member_ids?: boolean;
};

export type IGetGroupsForUserParams = IGetGroupsParams & {
  filter_has_member: string;
};

export type IGroupSearchParams = IGetGroupsParams & {
  q: string;
  filter_has_member?: string;
  include_timezones?: string;
  include_channel_member_count?: string;
};

//#endregion

//#region Mixed & Unlinked Groups

export type IMixedUnlinkedGroup = {
  mattermost_group_id?: string;
  name: string;
  primary_key: string;
  has_syncables?: boolean;
};

export type IMixedUnlinkedGroupRedux = IMixedUnlinkedGroup & {
  failed?: boolean;
};

//#endregion

//#region Membership

export type IGroupMember = {
  group_id: string;
  user_id: string;
  create_at: number;
  deleted_at: number;
};

export type IGroupMembership = {
  user_id: string;
  roles: string;
};

export type IUserWithGroup = IUserProfile & {
  groups: IGroup[];
  scheme_guest: boolean;
  scheme_user: boolean;
  scheme_admin: boolean;
};

//#endregion

//#region Collections

export type IGroupsWithCount = {
  groups: IGroup[];
  total_group_count: number;
  channelID?: string;
  teamID?: string;
};

export type IUsersWithGroupsAndCount = {
  users: IUserWithGroup[];
  total_count: number;
};

//#endregion

//#region Permissions

export type IGroupPermissions = {
  can_delete: boolean;
  can_manage_members: boolean;
  can_restore: boolean;
};

//#endregion
```

## Index Export

```typescript
// apps/v2/src/types/index.ts

export { ESyncableType, EGroupSource, EPluginGroupSourcePrefix } from "./group";

export type {
  IGroup,
  IGroupPatch,
  ICustomGroupPatch,
  IGroupCreateWithUserIds,
  ISyncablePatch,
  IGroupTeam,
  IGroupChannel,
  IGroupSyncable,
  IGroupSyncablesState,
  IGroupsState,
  IGroupStats,
  IGroupSearchOpts,
  IGetGroupsParams,
  IGetGroupsForUserParams,
  IGroupSearchParams,
  IMixedUnlinkedGroup,
  IMixedUnlinkedGroupRedux,
  IGroupMember,
  IGroupMembership,
  IUserWithGroup,
  IGroupsWithCount,
  IUsersWithGroupsAndCount,
  IGroupPermissions,
} from "./group";
```

## Acceptance Criteria

- [ ] All types defined with `type` keyword
- [ ] All types prefixed with `I`
- [ ] Enums prefixed with `E`
- [ ] Uses `#region` comments for organization
- [ ] Exported from `types/index.ts`
- [ ] No `any` types
- [ ] TypeScript strict mode passes
- [ ] Depends on `IUserProfile` from user.ts
- [ ] Depends on `IRelationOneToOne` from utilities.ts

## Testing

```bash
pnpm --filter @retrievly/app tsc --noEmit
```
