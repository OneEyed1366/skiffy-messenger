# T0.13: Session Types

## Metadata

| Field        | Value      |
| ------------ | ---------- |
| **ID**       | T0.13      |
| **Layer**    | L0 - Types |
| **Status**   | pending    |
| **Priority** | high       |
| **Estimate** | 1h         |
| **Parallel** | true       |
| **Assignee** | -          |
| **Created**  | 2026-01-04 |
| **Updated**  | 2026-01-04 |

## Dependencies

| Task ID | Name       | Why                                  |
| ------- | ---------- | ------------------------------------ |
| T0.03   | Team Types | `ITeamMembership` used in `ISession` |

## Blocks

| Task ID | Name         |
| ------- | ------------ |
| T7.02   | useAuthStore |

## Description

Migrate session and audit-related TypeScript types from Mattermost. These types are essential for authentication state management and user activity tracking.

## Source Files

- `vendor/desktop/webapp/platform/types/src/sessions.ts`
- `vendor/desktop/webapp/platform/types/src/audits.ts`

## Target File

`apps/v2/src/types/session.ts`

## Implementation

```typescript
// apps/v2/src/types/session.ts

/**
 * Session and audit-related type definitions
 * Migrated from:
 *   - vendor/desktop/webapp/platform/types/src/sessions.ts
 *   - vendor/desktop/webapp/platform/types/src/audits.ts
 */

import type { ITeamMembership } from "./team";

//#region Session

export type ISession = {
  id: string;
  token: string;
  create_at: number;
  expires_at: number;
  last_activity_at: number;
  user_id: string;
  device_id: string;
  roles: string;
  is_oauth: boolean;
  props: Record<string, unknown>;
  team_members: ITeamMembership[];
  local: boolean;
};

//#endregion

//#region Audit

export type IAudit = {
  id: string;
  create_at: number;
  user_id: string;
  action: string;
  extra_info: string;
  ip_address: string;
  session_id: string;
};

//#endregion
```

## Index Export

```typescript
// apps/v2/src/types/index.ts

export type { ISession, IAudit } from "./session";
```

## Acceptance Criteria

- [ ] All types defined with `type` keyword
- [ ] All types prefixed with `I`
- [ ] Uses `#region` comments for organization
- [ ] Exported from `types/index.ts`
- [ ] No `any` types (use `unknown` instead)
- [ ] TypeScript strict mode passes
- [ ] `ISession.team_members` uses `ITeamMembership[]` from team types

## Testing

```bash
pnpm --filter @retrievly/app tsc --noEmit
```
