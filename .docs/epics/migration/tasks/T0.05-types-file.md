# T0.05: File Types

## Metadata

| Field        | Value      |
| ------------ | ---------- |
| **ID**       | T0.05      |
| **Layer**    | L0 - Types |
| **Status**   | pending    |
| **Priority** | high       |
| **Estimate** | 1h         |
| **Parallel** | true       |
| **Assignee** | -          |
| **Created**  | 2026-01-04 |
| **Updated**  | 2026-01-04 |

## Dependencies

None

## Blocks

| Task ID | Name              |
| ------- | ----------------- |
| T4.08   | File format utils |
| T10b.10 | FileAttachment    |
| T10b.11 | ImagePreview      |

## Description

Migrate file-related TypeScript types from Mattermost.

## Source File

`vendor/desktop/webapp/platform/types/src/files.ts`

## Target File

`apps/v2/src/types/file.ts`

## Implementation

```typescript
// apps/v2/src/types/file.ts

/**
 * File-related type definitions
 * Migrated from: vendor/desktop/webapp/platform/types/src/files.ts
 */

//#region File Info

export type IFileInfo = {
  id: string;
  user_id: string;
  channel_id: string;
  create_at: number;
  update_at: number;
  delete_at: number;
  name: string;
  extension: string;
  size: number;
  mime_type: string;
  width: number;
  height: number;
  has_preview_image: boolean;
  clientId?: string;
  post_id?: string;
  mini_preview?: string;
  archived: boolean;
  link?: string;
};

//#endregion

//#region File Upload

export type IFileUploadResponse = {
  file_infos: IFileInfo[];
  client_ids: string[];
};

//#endregion

//#region File Search

export type IFileSearchResultItem = IFileInfo & {
  channel_display_name: string;
};

export type IFileSearchResults = {
  order: string[];
  file_infos: Record<string, IFileSearchResultItem>;
  next_file_id: string;
};

//#endregion

//#region File Types

export type IFileType =
  | "text"
  | "image"
  | "audio"
  | "video"
  | "spreadsheet"
  | "code"
  | "word"
  | "presentation"
  | "pdf"
  | "patch"
  | "svg"
  | "other";

//#endregion

//#region File Sizes

export const FileSizes = {
  Bit: 1,
  Byte: 8,
  Kilobyte: 1024,
  Megabyte: 1024 * 1024,
  Gigabyte: 1024 * 1024 * 1024,
} as const;

export type IFileSizeUnit = keyof typeof FileSizes;

//#endregion

//#region Public Link

export type IFilePublicLink = {
  link: string;
};

//#endregion
```

## Index Export

```typescript
// Add to apps/v2/src/types/index.ts

export type {
  IFileInfo,
  IFileUploadResponse,
  IFileSearchResultItem,
  IFileSearchResults,
  IFileType,
  IFileSizeUnit,
  IFilePublicLink,
} from "./file";

export { FileSizes } from "./file";
```

## Acceptance Criteria

- [ ] All file types migrated
- [ ] FileSizes constant exported
- [ ] All types prefixed with `I`
- [ ] TypeScript compiles

## Testing

```bash
pnpm --filter @retrievly/app tsc --noEmit
```
